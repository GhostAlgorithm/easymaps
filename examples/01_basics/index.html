<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <meta charset="utf-8">
    <link rel="stylesheet" type="text/css" href="common/css/bootstrap.css"/>
	<link rel="stylesheet" type="text/css" href="common/css/main.css"/>
    <style type="text/css">
      html { height: 100% }
      body { height: 100%; margin: 0; padding: 0 }
      #map_canvas { height: 100% }
    </style>
    <script type="text/javascript"
      src="http://maps.googleapis.com/maps/api/js?key=AIzaSyBYuhiS0SauIzg3yLxlsIlF4knSwrIW_cU&sensor=true">
    </script>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
    <script src="markerclusterer_compiled.js"></script>
    <script src="easymaps.min.js"></script>
    <script type="text/javascript">
        var map = null;
		
        function marker_callback(marker){
			marker.showInfoWindow();
        }
        
        function osmCallback(coord, zoom){
            return "http://tile.openstreetmap.org/" + zoom + "/" + coord.x + "/" + coord.y + ".png";
        }
		
		function initialize() {
            map = new EasyMap({
                container: 'map_canvas',
                latitude: 13.685449,
                longitude: -89.239938,
                zoom: 10,
                infoWindowSystem: EasyMap.InfoWindowSystem.ONE_WINDOW
            });
            
            map.setBounds({
                enable: true,
                maxZoom: 10,
                minZoom: 6,
                bounds: [[13.5509, -89.3017], [14.0151, -88.5805]]
            });
            
            var bluishStyle = [
                {
                    stylers: [
                        { hue: "#009999" },
                        { saturation: -5 },
                        { lightness: -40 }
                    ]
                }
            ];
            
            
            // Add different img resources (Open Street Map)
            
            map.getStyleManager().addImageMap({
                tileSize: [256, 256],
                callback: osmCallback,
                name: 'open_street_maps'
            });
            
            map.getExtResourceManager().addSource({name: 'kml_earthquake', url: 'http://earthquake.usgs.gov/earthquakes/feed/v1.0/summary/2.5_month_depth.kml'});
            
            //change to open street maps
            //map.map_obj.setMapTypeId('open_street_maps');
            
            //overlay open street maps
            //map.getStyleManager().setOverlay(0, 'open_street_maps');
            
            
            map.getStyleManager().addStyleMap({name: 'bluish_style', style: bluishStyle});
            map.map_obj.setMapTypeId('bluish_style');
            
            map.setMarkersCallbackFunc(marker_callback);
            //map.changeToRoadmap();
            map.addMarkerRes('test', 'http://gmaps-samples.googlecode.com/svn/trunk/markers/blue/blank.png');
            
            var marker = map.addMarker({
                latitude: 13.685449,
                longitude: -89.239938,
                title: 'Hola desde casa presidencial :D',
                icon: 'test'
            });
			marker.setInfoContent('Hola desde casa presidencial :D');
            
            var marker = map.addMarker({
                latitude: 13.693449,
                longitude: -89.239938,
                title: 'Hola desde casa presidencial :D',
                icon: 'test'
            });
			marker.setInfoContent('Hola desde casa presidencial :D');
            
            var marker = map.addMarker({
                latitude: 13.785449,
                longitude: -89.439938,
                title: 'Holiwis :3',
                icon: 'test'
            });
			marker.setInfoContent('Holiwis :3');
            
            var marker = map.addMarker({
                latitude: 13.725449,
                longitude: -89.489938,
                title: 'Holiwis :3',
                icon: 'test'
            });
			marker.setInfoContent('Asustado o.O');
            
            map.newLine();
            var line = map.getCurrentLine();
            line.addPoint(13.685449, -89.239938);
            line.addPoint(13.785449, -89.439938);
            
            var points = [
                new google.maps.LatLng(13.685449, -89.239938),
                new google.maps.LatLng(13.785449, -89.439938),
                new google.maps.LatLng(13.725449, -89.489938)
            ];
            
            map.newPolygon(points);
            
            map.cluster();
            map.decluster();
            
            map.map_context.setClass('visibility: hidden; background: #ffffff; border: 1px solid #8888FF; z-index: 10; position: relative; width: 100px; height: 100px; padding: 5px;');
            map.map_context.setHTML('<a href="javascript:createMarker()">Create Marker Here</a><br><a href="javascript:zoomIn()">Zoom In</a><br><a href="javascript:zoomOut()">Zoom Out</a><br>');
            
            //map.getExtResourceManager().setSource('kml_earthquake');
            map.setLogo('logo.png');
            map.removeLogo();
            map.setLogo('logo.png');
            map.loadGeoJSON('google.json', function(){
                map.map_geojson.changeStyleByProperty('letter', 'G', {fillColor: 'blue', fillOpacity: 1.0});
                map.map_geojson.changeStyleByProperty('letter', 'o', {fillColor: 'red', fillOpacity: 1.0});
            });
            
            map.showCoordinates();
            map.setOnUserPosition(10);
            //map.hideCoordinates();
		}
    </script>
  </head>
  <body onload="initialize()">
	<!--Menu -->
	<section class="main-menu">
		<center><img class="logo" class="pull-left" src="common/img/logo.png" title="ContaConmigo"></center>
	</section>
	<!--search -->
		<div class="col-xs-12  col-md-12 clearfix searching">
			<br>
				<div class="col-md-2"></div>
				<div class="col-xs-12 col-md-8">
					<div class="col-xs-12 col-md-6">
						<label>Departamento:</label>
							<select class="form-control">
								<option>a</option>
							</select>
					</div>
					<div class="col-xs-12 col-md-6">
						<label>Tipo de organizaci√≥n:</label>
							<select class="form-control">
								<option>a</option>
							</select>
					</div>
				</div>
		</div>
	<br>
	<br>
	<!--map -->
    <div id="map_canvas" style="width:100%; height:80%"></div>
  </body>
</html>